#!/usr/bin/env ruby

require_relative './ace'

N = 1_000_000

$list = Ace::List.new

# This is a random pattern of actions
actions = [ [0, 0], [0, 0], [0, 0], [0, 0], [1, 0], [1, 0], [1, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [2, 1], [2, 2], [1, 0], [1, 0], [1, 0], [1, 0], [0, 0], [0, 0], [2, 5], [0, 0], [1, 0], [0, 0], [2, 7], [2, 4], [1, 0], [0, 0], [0, 0], [1, 0], [0, 0], [0, 0], [2, 3], [0, 0], [2, 6], [0, 0], [2, 9], [1, 0], [2, 8], [0, 0], [0, 0], [0, 0], [1, 0], [0, 0], [0, 0], [1, 0], [1, 0], [2, 10], [0, 0], [1, 0], [2, 11], [1, 0], [0, 0], [2, 12], [2, 13], [0, 0], [0, 0], [0, 0], [2, 14], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [2, 15], [1, 0], [1, 0], [2, 16], [0, 0], [1, 0], [0, 0], [0, 0], [2, 17], [0, 0], [0, 0], [0, 0], [0, 0], [1, 0], [1, 0], [0, 0], [1, 0], [2, 18], [2, 19], [1, 0], [2, 20], [0, 0], [0, 0], [0, 0], [1, 0], [0, 0], [1, 0], [2, 21], [1, 0], [0, 0], [2, 22], [0, 0], [0, 0], [0, 0], [0, 0], [1, 0], [0, 0], [0, 0], [0, 0], [0, 0], [2, 23], [0, 0], [0, 0], [0, 0], [1, 0], [0, 0], [0, 0], [0, 0], [2, 24], [0, 0], [2, 25], [2, 26], [1, 0], [1, 0], [0, 0], [0, 0], [0, 0], [1, 0], [0, 0], [2, 27], [2, 28], [0, 0], [1, 0], [0, 0], [0, 0], [0, 0], [0, 0], [2, 29], [0, 0], [0, 0], [2, 30], [2, 31], [1, 0], [2, 32], [0, 0], [1, 0], [1, 0], [0, 0], [2, 33], [2, 0], [2, 34], [0, 0], [0, 0], [0, 0], [1, 0], [0, 0], [2, 35], [1, 0], [0, 0], [2, 36], [1, 0], [1, 0], [0, 0], [0, 0], [1, 0], [2, 37], [0, 0], [2, 38], [2, 39], [0, 0], [1, 0], [0, 0], [2, 40], [1, 0], [0, 0], [0, 0], [1, 0], [1, 0], [1, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [1, 0], [1, 0], [2, 41], [0, 0], [2, 42], [0, 0], [1, 0], [0, 0], [2, 43], [0, 0], [0, 0], [2, 44], [0, 0], [1, 0], [0, 0], [1, 0], [0, 0], [0, 0], [1, 0], [0, 0], [0, 0], [0, 0], [2, 45], [1, 0], [0, 0], [0, 0], [1, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [1, 0], [0, 0], [0, 0], [1, 0], [0, 0], [2, 46], [2, 50], [1, 0], [0, 0], [1, 0], [0, 0], [0, 0], [2, 47], [2, 48], [1, 0], [2, 49], [2, 51], [0, 0], [0, 0], [2, 52], [0, 0], [0, 0], [0, 0], [0, 0], [1, 0], [2, 57], [0, 0], [0, 0], [2, 53], [0, 0], [0, 0], [2, 54], [0, 0], [2, 55], [0, 0], [1, 0], [0, 0], [0, 0], [2, 56], [1, 0], [2, 58], [0, 0], [0, 0], [2, 60], [0, 0] ]

stash = Array.new(actions.size)

N.times do |round|
  stash_i = 0
  actions.each do |(type,index)|
    case type
    when 0
      $list.empty?
    when 1
      stash[stash_i] = $list.add(round); stash_i += 1;
    when 2
      $list.del(stash[index])
    end
  end
end
